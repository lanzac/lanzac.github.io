%-------------------------
% Resume in LateX
% Adapted tex template made by Sourabh Bajaj for my own used case
% https://github.com/sb2nov/resume/blob/master/sourabh_bajaj_resume.tex
% License : MIT
%------------------------

\documentclass[a4paper,11pt]{article}

\usepackage{latexsym}
\usepackage[empty]{fullpage}
\usepackage{titlesec}
\usepackage{marvosym}
\usepackage[usenames,dvipsnames]{color}
\usepackage{verbatim}
\usepackage{enumitem}
\usepackage[hidelinks]{hyperref}
\usepackage{fancyhdr}
\usepackage[english]{babel}
\usepackage{tabularx}
\usepackage{multicol}
\usepackage{pifont}
\usepackage{ifthen}
\usepackage{fontspec}
\usepackage{luatexja-fontspec}

% p.62 of: https://mirrors.ibiblio.org/CTAN/macros/latex/contrib/biblatex/doc/biblatex.pdf
\usepackage[
  style=numeric-comp,
  doi=true,
  isbn=false,
  url=false,
  sorting=none,
  backend=biber
]{biblatex}

% Hide fileds "pages", "volume", "number"
\AtEveryBibitem{
  \clearfield{pages} % Masque le champ "pages"
  \clearfield{volume} % Masque le champ "volume"
  \clearfield{number} % Masque le champ "number"
}


\DeclareFieldFormat{doi}{
  \mbox{\href{https://doi.org/#1}{\texttt{DOI:#1}}}
}


% https://tex.stackexchange.com/questions/401020/how-to-remove-the-language-information-in-a-bibliography
\AtEveryBibitem{\clearlist{language}}
% https://tex.stackexchange.com/questions/10682/suppress-in-biblatex
\renewbibmacro{in:}{}
\addbibresource{assets/tex/publications.bib}
\usepackage{csquotes}

\pagestyle{fancy}
\fancyhf{} % Clear all header and footer fields
\fancyfoot{}
\renewcommand{\headrulewidth}{0pt}
\renewcommand{\footrulewidth}{0pt}

% Adjust margins
\addtolength{\oddsidemargin}{-0.5in}
\addtolength{\evensidemargin}{-0.5in}
\addtolength{\textwidth}{1in}
\addtolength{\topmargin}{-.5in}
\addtolength{\textheight}{1.0in}

\urlstyle{same}

\raggedbottom
\raggedright
\setlength{\tabcolsep}{0in}

% fc-list  | cut -d\  -f2-99 | cut -d: -f1 | sort -u
% Linux Libertine O
\setmainfont{Open Sans}[
    BoldFont = {Open Sans SemiBold},
    SmallCapsFont = {TeX Gyre Termes},
    SmallCapsFeatures = {Letters=SmallCaps}
]

% Sections formatting
\titleformat{\section}{
  \vspace{-5pt}\raggedright\bfseries\large
}{}{0em}{}[\color{black}\titlerule \vspace{-5pt}]

%-------------------------
% Custom commands
% \newcommand{\resumeItem}[2]{
%   \item\small{
%     \textbf{#1}{: #2 \vspace{-2pt}}
%   }
% }
\newcommand{\resumeItem}[1]{
  \item \begin{minipage}[t]{0.98\textwidth}
    \raggedright #1
  \end{minipage}\vspace{1pt}
}

% Just in case someone needs a heading that does not need to be in a list
\newcommand{\resumeHeading}[4]{
    \begin{tabular*}{0.99\textwidth}[t]{l@{\extracolsep{\fill}}r}
      \textbf{#1} & #2 \\
      \textit{#3} & \textit{#4} \\
    \end{tabular*}\vspace{-5pt}
}

\newcommand{\resumeSubheadingBis}[4]{
  \vspace{-1pt}\item
    \begin{tabular*}{\textwidth}[t]{l@{\extracolsep{\fill}}r}
      \textbf{#1} & \textit{#2} \\
      \textit{#3}
    \end{tabular*}
    \begin{minipage}[t]{0.85\textwidth} #4 \end{minipage} \vspace{-2pt}
    \vspace{2pt}
}


\newcommand{\resumeSubSubheading}[2]{
    \begin{tabular*}{0.97\textwidth}{l@{\extracolsep{\fill}}r}
      \textit{#1} & \textit{#2} \\
    \end{tabular*}\vspace{-5pt}
}

\newcommand{\resumeSubItem}[2]{\resumeItem{#1}{#2}\vspace{-4pt}}

\renewcommand{\labelitemii}{$\circ$}

\newcommand{\resumeSubHeadingListStart}{\begin{itemize}[leftmargin=0pt, label={}, itemsep=0pt]}
\newcommand{\resumeSubHeadingListEnd}{\end{itemize}}
\newcommand{\resumeItemListStart}{\begin{itemize}[leftmargin=*, label={\sbt}]}
\newcommand{\resumeItemListEnd}{\end{itemize}\vspace{-5pt}}



% https://www.johndcook.com/blog/2011/10/18/typesetting-c-in-latex/
\usepackage{relsize}
\newcommand{\Cs}{C\nolinebreak\hspace{-.15em}\textscale{0.9}{\symbol{"266F}}}
\newcommand{\Cpp}{C\texttt{++}}

\newcommand{\sbt}{\,\begin{picture}(-1,1)(-1,-3)\circle*{3}\end{picture}\ }

\newcommand{\formatDate}[2]{
  \ifthenelse{\equal{#1}{#2}}
    {#1}
    {#1 -- #2}
}

\setlength{\footskip}{4.1pt}

\usepackage[none]{hyphenat} % Désactive les césures globalement
\raggedright               % Texte aligné à gauche, sans justification

\setlength{\spaceskip}{3pt}
\setlength{\xspaceskip}{3pt}

%-------------------------------------------
%%%%%%  SECTIONS CONFIGURATION  %%%%%%%%%%%%

%----------HEADING-----------------
\newcommand{\heading}{
  \begin{tabular*}{\textwidth}{l@{\extracolsep{\fill}}r}
    \textbf{\href{ {{- basics.url -}} }{\Large {{ basics.name }}}} & \href{mailto:{{ basics.email }}}{ {{- basics.email -}} }\\
    {% set current_version = config.currentVersion %}
    {{ basics.label[current_version] }} & \href{ {{- basics.url -}} }{ {{- basics.url | replace("https://", "") -}} } \\
    % Mobile: \href{tel:{{ basics.phone }}}{ {{- basics.phone -}} }
  \end{tabular*}
}

%-----------EDUCATION-----------------
\newcommand{\resumeSubheadingEducation}[4]{
  \vspace{-1pt}\item
    \begin{tabular*}{\textwidth}[t]{l@{\extracolsep{\fill}}r}
      \textbf{#1} -- #2 & #3 \\
      \ifx&#4&\else #4 \\ \fi
    \end{tabular*}\vspace{-7pt}
}

\newcommand{\education}{
  \section{ {{- l10n.sectiontitle.education -}} }
  \resumeSubHeadingListStart
    {% for entry in education -%}
    \resumeSubheadingEducation
      {%- if entry.location %}
        { {{- entry.institution -}}, {{ entry.location -}} }{ {{- entry.studyType }} {{ l10n.misc.in }} {{ entry.area -}} }{ {{ entry.endDate -}} }
      {%- else %}
      { {{- entry.institution -}} }{ {{- entry.studyType }} {{ l10n.misc.in }} {{ entry.area -}} }{ {{ entry.endDate -}} }
      {%- endif %}
      {%- if entry.advisors %}
        {%- if entry.advisors|length > 1 %}
      { {{ l10n.misc.advisor }}s: {{ entry.advisors | join(", ") -}} }
        {%- else %}
      { {{ l10n.misc.advisor }}: {{ entry.advisors[0] -}} }
        {%- endif %}
      {%- else %}
      {}
      {%- endif %}
      
    {% endfor -%}
  \resumeSubHeadingListEnd
}

%-----------EXPERIENCE-----------------
\newcommand{\resumeSubheadingExperience}[4]{
  \vspace{-1pt}\item
    \begin{tabular*}{\textwidth}[t]{l@{\extracolsep{\fill}}r}
      \textbf{#1} & #2 \\
      #3, #4 & \\
    \end{tabular*}\vspace{-7pt}
}

\newcommand{\work}{
  \section{ {{- l10n.sectiontitle.work -}} }
  \resumeSubHeadingListStart
    {% for entry in work -%}
    \resumeSubheadingExperience
      { {{- entry.position -}} }{\formatDate{ {{- entry.startDate -}} }{ {{- entry.endDate -}} }}
      { \href{ {{- entry.url -}} }{ {{- entry.name -}} } }{ {{- entry.location -}} }
      \resumeItemListStart
        {% set current_version = config.currentVersion %}
        {%- for item in entry.highlights[current_version] %}
          \resumeItem{ {{- item -}} }
        {%- endfor %}
      \resumeItemListEnd
      \vspace{5pt}
    {% endfor -%}
  \resumeSubHeadingListEnd
}

%-----------PROJECTS-----------------
\newcommand{\projects}{
  \section{ {{- l10n.sectiontitle.projects -}} }
  \resumeSubHeadingListStart
    {% for entry in projects -%}
    \resumeSubheadingBis
      { {{- entry.name -}} }{ {{- entry.startDate }} -- {{ entry.endDate }} }
      { {{- entry.role -}} }
      { {{- entry.description -}} }
    {% endfor -%}
  \resumeSubHeadingListEnd
}

%--------PUBLICATIONS------------
\newcommand{\publications}{
  \nocite{*}
  \printbibliography[title={{- l10n.sectiontitle.publications -}}, nottype=cited]
}

%--------SKILLS------------
\newcommand{\skills}{
  \section{ {{- l10n.sectiontitle.skills -}} }
  \begin{tabularx}{\textwidth}[t]{@{}lX@{}}
    {% for entry in skills -%}
      \textbf{ {{- entry.name -}}: } & \sffamily{ {{ entry.keywords | join(", ") }} } \\
    {% endfor -%}
  \end{tabularx}
}

%-------------------------------------------
%%%%%%  CV STARTS HERE  %%%%%%%%%%%%%%%%%%%%

\begin{document}

\heading

{% set current_version = config.currentVersion %}
{% for section in config.versions[current_version].sections %}
\{{ section }}
{% endfor %}

\end{document}
